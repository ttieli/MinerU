# MinerU全功能版 - 48GB内存优化配置

# 端口配置 - 避免冲突
API_PORT=8008
WEBUI_PORT=3008
MONITOR_PORT=8088

# 版本配置
VERSION=2.0-full-48gb
PREDOWNLOAD_MODELS=true

# 48GB内存优化配置
DEVICE_MODE=mps
MPS_MEMORY_LIMIT=16G
MPS_MEMORY_FRACTION=0.8

# 内存分配策略
MEMORY_LIMIT=16G
MEMORY_RESERVATION=8G
CPU_LIMIT=8.0
CPU_RESERVATION=4.0

# 高性能配置
MAX_WORKERS=6
BATCH_SIZE=3
WORKER_PROCESSES=6
WORKER_THREADS=2
MAX_CONCURRENT_REQUESTS=6

# 内存管理策略
MEMORY_EFFICIENT_MODE=false
MODEL_OFFLOAD_CPU=false
CLEAR_CACHE_INTERVAL=200
ADAPTIVE_BATCH_SIZE=true

# 功能配置 - 全部启用
ENABLE_VLM=true
ENABLE_PIPELINE=true
ENABLE_TABLE=true
ENABLE_FORMULA=true
ENABLE_LLM_AIDED=false
ENABLE_WEBUI=false

# 模型配置
MINERU_MODEL_SOURCE=huggingface
MODEL_PRECISION=fp16

# 性能优化
QUEUE_MAX_SIZE=200
REQUEST_TIMEOUT=600
ENABLE_MODEL_WARMUP=true

# 日志配置
LOG_LEVEL=INFO
LOG_FORMAT=json

# 监控配置
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=15s
HEALTH_CHECK_RETRIES=3
HEALTH_CHECK_START_PERIOD=180s
